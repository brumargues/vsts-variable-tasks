{
  "id": "9ccfb3bb-7ec0-4626-8599-164b1f95f933",
  "name": "VariableTransformTask",
  "friendlyName": "Transform value #{Extension.Tag}#",
  "description": "Transform value and assign to variable.",
  "helpMarkDown": "Version: #{Build.BuildNumber}#. [More Information](https://github.com/jessehouwing/vsts-variable-tasks/wiki/)",
  "category": "Utility",
  "author": "Jesse Houwing",
  "version": {
    "Major": 0,
    "Minor": 0,
    "Patch": 0
  },
  "visibility": [
    "Build",
    "Release"
  ],
  "minimumAgentVersion": "1.83.0",
  "groups": [
    {
      "name": "Manipulation",
      "displayName": "Manipulation",
      "isExpanded": true
    },
    {
      "name": "Transformation",
      "displayName": "Transformation",
      "isExpanded": true
    }

  ],
  "inputs": [
    {
      "defaultValue": "",
      "helpMarkdown": "Input value.",
      "label": "Input Value",
      "name": "value",
      "required": false,
      "type": "string"
    },
    {
      "defaultValue": "",
      "helpMarkdown": "Variable to set. Only supply the variable name and do not include `$(...)`.",
      "label": "Output Variable",
      "name": "variableName",
      "required": true,
      "type": "string"
    },

    {
      "name": "transformAction",
      "type": "pickList",
      "label": "Action",
      "required": true,
      "helpMarkDown": "",
      "options": {
        "none": "None",
        "base64": "Base 64",
        "uri": "Uri",
        "uriComponent": "Uri Component",
        "slashes": "Slashes"
      },
      "groupName": "Transformation"
    },

    {
      "name": "encodeOrDecode",
      "type": "radio",
      "label": "Category",
      "required": true,
      "helpMarkDown": "",
      "options": {
        "encodeString": "Encode",
        "decodeString": "Decode"
      },
      "groupName": "Transformation",
      "visibleRule": "transformAction != none"
    },
    {
      "name": "pointInTime",
      "type": "radio",
      "label": "Apply Transformation",
      "required": true,
      "helpMarkDown": "",
      "options": {
        "beforeManipulation": "Before",
        "afterManipulation": "After manipulation"
      },
      "visibleRule": "transformAction != none",
      "groupName": "Transformation"
    },


    {
      "name": "searchReplace",
      "type": "bool",
      "label": "Search and Replace",
      "helpMarkDown": "",
      "groupName": "Manipulation"
    },
    {
      "name": "searchReplaceMethod",
      "type": "pickList",
      "label": "Method",
      "required": true,
      "defaultValue": "basic",
      "helpMarkDown": "",
      "options": {
        "basic": "Basic",
        "regex": "Regex Replace",
        "match": "Regex Match"
      },
      "groupName": "Manipulation",
      "visibleRule": "searchReplace=true"
    },

    {
      "name": "searchValue",
      "type": "multiLine",
      "label": "Search",
      "helpMarkDown": "",
      "groupName": "Manipulation",
      "visibleRule": "searchReplace=true"
    },

    {
      "name": "replacementValue",
      "type": "multiLine",
      "label": "Replacement",
      "helpMarkDown": "",
      "groupName": "Manipulation",
      "visibleRule": "searchReplace=true & searchReplaceType!=match"
    },

    {
      "name": "regexOptions",
      "type": "string",
      "label": "Regex Options",
      "helpMarkDown": "",
      "groupName": "Manipulation",
      "visibleRule": "searchReplace=true & searchReplaceType!=basic"
    },




    {
      "name": "pad",
      "type": "bool",
      "label": "Pad",
      "helpMarkDown": "",
      "groupName": "Manipulation"
    },
    {
      "name": "padType",
      "type": "radio",
      "label": "Type",
      "required": true,
      "helpMarkDown": "",
      "groupName": "Manipulation",
      "options": {
        "left": "Left",
        "right": "Right"
      },
      "visibleRule": "pad=true"
    },
    {
      "name": "padChar",
      "type": "string",
      "label": "Character",
      "helpMarkDown": "",
      "groupName": "Manipulation",
      "visibleRule": "pad=true"
    },
    {
      "name": "padLength",
      "type": "int",
      "required": true,
      "label": "Length",
      "helpMarkDown": "",
      "groupName": "Manipulation",
      "visibleRule": "pad=true"
    },

    {
      "name": "trim",
      "type": "bool",
      "label": "Trim",
      "helpMarkDown": "",
      "groupName": "Manipulation"
    },

    {
      "name": "slice",
      "type": "Slice",
      "helpMarkDown": "",
      "groupName": "Manipulation"
    },
    {
      "name": "sliceLeft",
      "type": "int",
      "required": true,
      "label": "Left",
      "helpMarkDown": "",
      "groupName": "Manipulation",
      "visibleRule": "slice=true"
    },
    {
      "name": "spliceRight",
      "type": "int",
      "required": true,
      "label": "Right",
      "helpMarkDown": "",
      "groupName": "Manipulation",
      "visibleRule": "slice=true"
    },

    {
      "name": "substring",
      "type": "Substring",
      "helpMarkDown": "",
      "groupName": "Manipulation"
    },
    {
      "name": "substringType",
      "type": "radio",
      "label": "Type",
      "helpMarkDown": "",
      "groupName": "Manipulation",
      "default": "substring",
      "options": {
        "substring": "Substring",
        "left": "Left",
        "right": "Right"
      },
      "visibleRule": "substring=true"
    },
    {
      "name": "substringStart",
      "type": "int",
      "required": true,
      "label": "Start",
      "helpMarkDown": "",
      "groupName": "Manipulation",
      "visibleRule": "substring=true & substringType=substring"
    },
    {
      "name": "substringLength",
      "type": "int",
      "required": true,
      "label": "Length",
      "helpMarkDown": "",
      "groupName": "Manipulation",
      "visibleRule": "substring=true"
    },

    {
      "name": "casing",
      "type": "bool",
      "label": "Change Case",
      "helpMarkDown": "",
      "groupName": "Manipulation"
    },
    {
      "name": "casingType",
      "type": "radio",
      "label": "Type",
      "helpMarkDown": "",
      "groupName": "Manipulation",
      "options": {
        "upper": "upper",
        "lower": "lower"
      },
      "visibleRule": "casing=true"
    }


  ],
  "instanceNameFormat": "Transform value '$(value)' and assign to variable: $(variableName)",
  "execution": {
    "Node": {
      "target": "vsts-variable-transform.js",
      "argumentFormat": ""
    }
  }
}